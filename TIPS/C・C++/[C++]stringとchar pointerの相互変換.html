<!DOCTYPE html>
<!-- 基準URI -->
<base href="https://takaha-q.github.io/">
<!-- スタイルシート -->
<link rel="stylesheet" href="Sytle001.css" type="text/css">
<!-- スクリプト -->
<!-- タイトル表示 -->
<script src="MakeTitle.js" type="text/javascript"></script>
<!-- 目次表示 -->
<script src="MakeToc_L.js" type="text/javascript"></script>
<!-- ページタイトル(ページ内表示) -->
<span id="title"></span>
<!-- リンク(ホームに戻る) -->
<a href="index.html">ホームに戻る</a><br>
<!-- 出典・関連ページ -->
<h5>出典 :</h5>
<a href="https://www.sejuku.net/blog/52403">
【C++入門】string型⇔char*型に変換する方法まとめ | 侍エンジニアブログ</a><br>
<!-- 目次 -->
<h5>目次 :</h5>
<div id="toc"></div>
<hr>
<!-- 本文ここから -->
<h2>char* と string</h2>
C++では文字列を格納する際に、C準拠の char* に加え string 型を使用できる。<br>
string は文字列の扱いがより簡便であるが、Cのライブラリ関数では string が使用できない。<br>
その場合は string を char* に変換する必要がある。<br>
尚、C++における文字列のデフォルトは char* であるため、文字列リテラルは const char* と見なされる。<br>
(後述のように string への代入が可能であるため、デフォルト型を意識する必要はほぼ無い。)
<h3>string の基本</h3>
string 型を使用する際は、<b>&lt;string&gt;</b> のインクルードが必要となる。<br>
また、string は <b>std</b> 名前空間に属しており、名前空間の解決が必要となる。
<div class="code">
<kwd>#include</kwd> &lt;<kwd>string</kwd>&gt;       <cmt>//< string 型を使用するために必要</cmt>
<kwd>void</kwd> DoSomething()
{
    <cmt>// string 型変数の宣言と初期化</cmt>
    <kwd>std</kwd>::<kwd>string</kwd> str = "What happened!?";
    :
}
</div>
<h2>char* 型を用いた string の初期化(char* から string への変換)</h2>
char* で string を初期化(および代入)できる。<br>
<div class="code">
<cmt>// 初期化に使用する文字列( char* )</cmt>
<kwd>const char</kwd>* input = "Rock'n Roll never dies.";
<cmt>// 以下はいずれも等価</cmt>
<cmt>// (コンストラクタ引数に input を与えて初期化)</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str1 = input;
<kwd>std</kwd>::<kwd>string</kwd> str2(input);
<kwd>std</kwd>::<kwd>string</kwd> str3 {input};
<cmt>// string に char* を代入することも可能</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str4;
str4 = input;
<cmt>// 各変数の値を出力</cmt>
<kwd>std</kwd>::cout << "input : " << input << <kwd>std</kwd>::endl;
<kwd>std</kwd>::cout << "str1  : " << str1  << <kwd>std</kwd>::endl;
<kwd>std</kwd>::cout << "str2  : " << str2  << <kwd>std</kwd>::endl;
<kwd>std</kwd>::cout << "str3  : " << str3  << <kwd>std</kwd>::endl;
<kwd>std</kwd>::cout << "str4  : " << str4  << <kwd>std</kwd>::endl;
</div>
<h5>実行結果</h5>
<div class="code">
input : Rock'n Roll never dies.
str1  : Rock'n Roll never dies.
str2  : Rock'n Roll never dies.
str3  : Rock'n Roll never dies.
str4  : Rock'n Roll never dies.
</div>
初期化の際に char* の一部(部分文字列)を抽出することも可能である。
<div class="code">
<kwd>const char</kwd>* input = "Rock'n Roll never dies.";
<cmt>// input の先頭から 6 文字を抽出する</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str5(input, 6);
<cmt>// input の 7 文字目から 4 文字を抽出する</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str6(input, 7, 4);
<cmt>// 各変数の値を出力</cmt>
<kwd>std</kwd>::cout << "input : " << input << <kwd>std</kwd>::endl;
<kwd>std</kwd>::cout << "str5  : " << str5 << <kwd>std</kwd>::endl;
<kwd>std</kwd>::cout << "str6  : " << str6 << <kwd>std</kwd>::endl;
</div>
<h5>実行結果</h5>
<div class="code">
input : Rock'n Roll never dies.
str5  : Rock'n
str6  : Roll
</div>
<h2>string から char* への変換( c_str() )</h2>
string のメンバ関数<b> c_str()</b> を用いることで、char* を得ることができる。<br>
printf() などのCライブラリ関数は string を引数に取ることができないため、この方法で char* に変換して用いる。
<div class="code">
<cmt>// string 型変数の宣言・初期化</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str = "THE HIGH-LOWS"
<cmt>// printf() に string 直接を渡す ⇒ エラー</cmt>
printf("%s\n", str);
<cmt>// char* 型に変換して printf() に渡す ⇒ OK</cmt>
printf("%s\n", str.c_str());
</div>
<h5>実行結果</h5>
<div class="code">
THE HIGH-LOWS
</div>
