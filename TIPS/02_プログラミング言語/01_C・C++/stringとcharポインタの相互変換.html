<!DOCTYPE html>

<!-- 基準URI -->
<base href="https://takaha-q.github.io/">

<!-- スタイルシート -->
<link rel="stylesheet" href="Sytle001.css" type="text/css">

<!-- スクリプト -->
<!-- タイトル表示 -->
<script src="MakeTitle.js" type="text/javascript"></script>

<!-- 目次表示 -->
<script src="MakeToc_L.js" type="text/javascript"></script>

<!-- ページタイトル(ページ内表示) -->
<span id="title"></span>

<!-- リンク(ホームに戻る) -->
<a href="index.html">ホームに戻る</a><br>

<!-- 出典 -->
<h6>出典 :</h6>
<a href="https://www.sejuku.net/blog/52403">【C++入門】string型⇔char*型に変換する方法まとめ | 侍エンジニアブログ</a><br>

<!-- 関連 -->
<h6>関連 :</h6>
<a href="TIPS\C・C++\文字・文字列.html">文字・文字列</a>

<!-- 目次 -->
<h6>目次 :</h6>
<div id="toc"></div>
<hr>

<!-- 本文ここから -->

<h2>char [n] 型( char 配列)を用いた string の初期化( char [n] から string への変換)</h2>
char [n] で string を初期化(および代入)できる。<br>

<div class="cpp">
<cmt>// 初期化に使用する文字列( char [n] )</cmt>
<kwd>const char</kwd>* input = <ltr>"Rock'n Roll never dies."</ltr>;

<cmt>// 以下はいずれも等価</cmt>
<cmt>// (コンストラクタ引数に input を与えて初期化)</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str1 = input;
<kwd>std</kwd>::<kwd>string</kwd> str2(input);
<kwd>std</kwd>::<kwd>string</kwd> str3 {input};

<cmt>// string に char [n] を代入することも可能</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str4;
str4 = input;

<cmt>// 各変数の値を出力</cmt>
<kwd>std</kwd>::<kwd>cout</kwd> &lt;&lt; <ltr>"input : "</ltr> &lt;&lt; input &lt;&lt; <kwd>std</kwd>::<kwd>endl</kwd>;

<kwd>std</kwd>::<kwd>cout</kwd> &lt;&lt; <ltr>"str1  : "</ltr> &lt;&lt; str1  &lt;&lt; <kwd>std</kwd>::<kwd>endl</kwd>;
<kwd>std</kwd>::<kwd>cout</kwd> &lt;&lt; <ltr>"str2  : "</ltr> &lt;&lt; str2  &lt;&lt; <kwd>std</kwd>::<kwd>endl</kwd>;
<kwd>std</kwd>::<kwd>cout</kwd> &lt;&lt; <ltr>"str3  : "</ltr> &lt;&lt; str3  &lt;&lt; <kwd>std</kwd>::<kwd>endl</kwd>;
<kwd>std</kwd>::<kwd>cout</kwd> &lt;&lt; <ltr>"str4  : "</ltr> &lt;&lt; str4  &lt;&lt; <kwd>std</kwd>::<kwd>endl</kwd>;
</div>

<h6>実行結果</h6>
<div class="code"><ltr>
input : Rock'n Roll never dies.
str1  : Rock'n Roll never dies.
str2  : Rock'n Roll never dies.
str3  : Rock'n Roll never dies.
str4  : Rock'n Roll never dies.
</ltr></div>

初期化の際に char [n] の一部(部分文字列)を抽出することも可能である。
<div class="cpp">
<kwd>const char</kwd>* input = <ltr>"Rock'n Roll never dies."</ltr>;

<cmt>// input の先頭から 6 文字を抽出する</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str5(input, <ltr>6</ltr>);

<cmt>// input の 7 文字目から 4 文字を抽出する</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str6(input, <ltr>7</ltr>, <ltr>4</ltr>);

<cmt>// 各変数の値を出力</cmt>
<kwd>std</kwd>::<kwd>cout</kwd> &lt;&lt; <ltr>"input : "</ltr> &lt;&lt; input &lt;&lt; <kwd>std</kwd>::<kwd>endl</kwd>;

<kwd>std</kwd>::<kwd>cout</kwd> &lt;&lt; <ltr>"str5  : "</ltr> &lt;&lt; str5 &lt;&lt; <kwd>std</kwd>::<kwd>endl</kwd>;
<kwd>std</kwd>::<kwd>cout</kwd> &lt;&lt; <ltr>"str6  : "</ltr> &lt;&lt; str6 &lt;&lt; <kwd>std</kwd>::<kwd>endl</kwd>;
</div>

<h6>実行結果</h6>
<div class="code"><ltr>
input : Rock'n Roll never dies.
str5  : Rock'n
str6  : Roll
</ltr></div>

<h2>string から char* への変換( c_str() )</h2>
string のメンバ関数<b> c_str()</b> を用いることで、char* を得ることができる。<br>
printf() などのCライブラリ関数は string を引数に取ることができないため、この方法で char* に変換して用いる。

<div class="cpp">
<cmt>// string 型変数の宣言・初期化</cmt>
<kwd>std</kwd>::<kwd>string</kwd> str = <ltr>"THE HIGH-LOWS"</ltr>

<cmt>// printf() に string を直接渡す ⇒ エラー</cmt>
// printf("%s\n", str);

<cmt>// char* 型に変換して printf() に渡す ⇒ OK</cmt>
printf(<ltr>"%s\n"</ltr>, str.c_str());
</div>

<h6>実行結果</h6>
<div class="code"><ltr>
THE HIGH-LOWS
</ltr></div>
