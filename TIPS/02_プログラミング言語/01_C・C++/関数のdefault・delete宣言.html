<!DOCTYPE html>

<!-- 基準URI -->
<base href="https://takaha-q.github.io/">

<!-- スタイルシート -->
<link rel="stylesheet" href="Sytle001.css" type="text/css">

<!-- スクリプト -->
<!-- タイトル表示 -->
<script src="MakeTitle.js" type="text/javascript"></script>

<!-- 目次表示 -->
<script src="MakeToc_L.js" type="text/javascript"></script>

<!-- ページタイトル(ページ内表示) -->
<span id="title"></span>

<!-- リンク(ホームに戻る) -->
<a href="index.html">ホームに戻る</a><br>

<!-- 出典ページ -->
<h6>出典 :</h6>
<a href="https://cpprefjp.github.io/lang/cpp11/defaulted_and_deleted_functions.html">関数のdefault／delete宣言 - cpprefjp C++日本語リファレンス</a><br>

<!-- 関連ページ -->
<h6>関連 :</h6>
<a href="TIPS/02_プログラミング言語/01_C・C%2B%2B/C%2B%2B11.html">C++11</a><br>
<a href="TIPS/02_プログラミング言語/01_C・C%2B%2B/コピーコンストラクタ.html">コピーコンストラクタ</a><br>
<a href="TIPS/02_プログラミング言語/01_C・C%2B%2B/ムーブと右辺値参照.html">ムーブと右辺値参照</a><br>
<a href="TIPS/02_プログラミング言語/01_C・C%2B%2B/演算子オーバーロード.html">演算子オーバーロード</a><br>
<a href="TIPS/02_プログラミング言語/01_C・C%2B%2B/インライン関数 (Inline Function).html">インライン関数 (Inline Function)</a><br>
<a href="TIPS/02_プログラミング言語/01_C・C%2B%2B/仮想関数 (Virtual Function).html">仮想関数 (Virtual Function)</a><br>

<!-- 目次 -->
<h6>目次 :</h6>
<div id="toc"></div>
<hr>

<!-- 本文ここから -->
<h2>クラス定義時に暗黙的に定義される関数</h2>
クラスを定義すると、以下のメンバ関数が暗黙的に定義される。
<ul>
<li>デフォルトコンストラクタ (引数無しのコンストラクタ)</li>
<li>コピーコンストラクタ</li>
<li>ムーブコンストラクタ</li>
<li>コピー代入演算子</li>
<li>ムーブ代入演算子</li>
<li>デストラクタ</li>
</ul>

C++11にて、これらの暗黙定義される特殊関数を制御するために <b>default / delete</b> 構文が追加された。

<h2>default 宣言</h2>
<span class="code"> = <kwd>default</kwd> </span>は、暗黙定義のデフォルトの挙動を使用することを明示する。<br>
関数の挙動を変えずにインライン化、または仮想化する際に有用となる。

<div class="code">
<kwd>class</kwd> X
{
<kwd>public</kwd>:
    <cmt>// デストラクタを仮想化</cmt>
    <cmt>// ただし挙動はデフォルトのままとする</cmt>
    <kwd>virtual</kwd> ~X() = <kwd>default</kwd>;

    <cmt>// コピーコンストラクタをインライン化</cmt>
    <cmt>// ただし挙動はデフォルトのままとする</cmt>
    <kwd>inline</kwd> X(<kwd>const</kwd> X&) = <kwd>default</kwd>;
};
</div>

<h2>delete 宣言</h2>
<span class="code"> = <kwd>delete</kwd> </span>は、暗黙定義を禁止することを明示する。これにより、クラスのコピーやムーブを制限することができる。

<div class="code">
<kwd>class</kwd> X
{
<kwd>public</kwd>:
    <cmt>// コピーコンストラクタ、コピー代入演算子の定義を削除</cmt>
    <cmt>// ⇒ コピー禁止</cmt>
    X(<kwd>const</kwd> X&) = <kwd>delete</kwd>;
    X& <kwd>operator</kwd> =(<kwd>const</kwd> X&) = <kwd>delete</kwd>;

    <cmt>// 特殊メンバ関数を明示的に定義もしくはdeleteした場合、</cmt>
    <cmt>// それ以外の特殊メンバ関数は明示的に定義もしくはdefault宣言しなければ</cmt>
    <cmt>// 暗黙定義されない</cmt>
    X() = <kwd>default</kwd>;                  <cmt>//< デフォルトコンストラクタ</cmt>
    X(X&&) = <kwd>default</kwd>;               <cmt>//< ムーブコンストラクタ</cmt>
    X& <kwd>operator</kwd> =(X&&) = <kwd>default</kwd>;   <cmt>//< ムーブ代入演算子</cmt>
};

<kwd>int</kwd> main()
{
    X x1;
 <cmt>// X x2 = x1;      //< コピーコンストラクタが削除されているためコピー不可 ⇒ コンパイルエラー</cmt>
    X x3 = X();     <cmt>//< ムーブコンストラクタ呼び出し ⇒ OK</cmt>

    X x4;
 <cmt>// x4 = x1;        //< コピー代入演算子が削除されているためコピー不可 ⇒ コンパイルエラー</cmt>

    X x5;
    x5 = X();       <cmt>//< ムーブ代入 ⇒ OK</cmt>
}
</div>

<h3>特殊メンバ関数以外への delete</h3>
<span class="code"> = <kwd>delete</kwd> </span>は特殊メンバ関数以外に対しても使用でき、特定のオーバーロードを明示的に禁止することができる。

<div class="code">
<kwd>void</kwd> f() = <kwd>delete</kwd>;      <cmt>//< 引数無しの f() 定義を禁止 </cmt>

<kwd>int</kwd> main()
{
    <cmt>// f();     //< delete 宣言されているため呼び出せない ⇒ コンパイルエラー</cmt>
}
</div>




